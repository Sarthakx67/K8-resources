# Deployment manifest for nginx
# - Creates a ReplicaSet that ensures the desired number of Pod replicas are running.
# - Use Deployments to perform rolling updates, rollbacks, and scale replicas.
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-deployment    # logical name for the Deployment object
  labels:
    app: nginx              # top-level labels can be used to select this Deployment
    environment: dev
spec:
  replicas: 3               # desired number of Pod replicas (ReplicaSet will maintain this)
  selector:
    matchLabels:
      app: nginx            # selector must match the labels defined in template.metadata.labels
      environment: dev
      componet: frontend
  template:
    metadata:
      labels:
        app: nginx          # labels applied to Pods created by this Deployment
        environment: dev
        componet: frontend
    spec:
      containers:
      - name: nginx
        image: nginx        # container image (no tag => 'latest' by default; consider pinning a tag for reproducibility)
        ports:
        - containerPort: 80 # port exposed by the container (containerPort is informational for Kubernetes and used in port mappings)
# Notes:
# - The Deployment creates a ReplicaSet which in turn creates Pods using the template above.
# - Changing spec.template (e.g., image) triggers a rolling update by default.
# - Ensure selector.matchLabels exactly equals template.metadata.labels; mismatch prevents the Deployment from managing the Pods.
# - For production, add resources.requests/limits and imagePullPolicy, and pin the image tag.
